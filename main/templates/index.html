{% extends 'layout.html' %}
{% block body %}
<br><br>
<div class="body_container">
    <div class="generate_button_container">
        <h2>Join over 5 developers and interviewers.<br>Generate link for interviews, and start hiring.<br></h2>
        {% if user.is_authenticated %}
        <h4><button class="btn button btn-success" onclick="generate_interview()">
                <b>Generate Interview</b></button>
            {% else %}
            <h4><a class="btn button btn-success" href="{% url 'login' %}">
                    <b>Generate Interview</b></a>
            </h4>
            {% endif %}
    </div>
    <div class="email_container">
        <input id='email_field' type='text/email' placeholder="Enter Candidate's Mail Id..">
    </div>
</div>
<style>
    .button {
        padding: 10px 50px;
        font-size: 24px;
        font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
        box-shadow: 0 4px 12px rgba(27, 169, 76, 0.5);
    }

    .body_container {
        display: grid;
        grid-template-columns: auto;
        grid-template-rows: 1fr 1fr 1fr;
    }

    .generate_button_container {
        text-align: center;
        grid-row: 2 / span 1;
    }

    .email_container {
        display: none;
        text-align: center;
        border-radius: 5px;
        background-color: #f2f2f2;
        padding: 20px;
        grid-row: 3 / span 1;
    }

    #email_field {
        width: 60%;
        padding: 12px 20px;
        margin: 8px 0;
        text-align: center;
        display: inline-block;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
    }
</style>
<script>
    document.querySelector('#email_field').onkeyup = function (e) {
        if (e.keyCode == 13) {
            // var mail = document.querySelector('#email_field').value;
            // // alert('{{user.get_username}}' + mail);
            // var arg = hashCode(mail);
            // var a = window.location.host + '/interview/';
            // var url = a.concat(arg.toString());
            // alert(url)
            // window.location = url.toString();
            window.location = "{% url 'interview' 765587 %}";
        }
    };

    function hashCode(str) {
        return str.split('').reduce((prevHash, currVal) =>
        (((prevHash << 5) - prevHash) + currVal.charCodeAt(0))|0, 0);
    }

    function generate_interview() {
        document.querySelector('.email_container').style.display = 'block';
        document.querySelector('#email_field').focus();
    }
</script>
{% endblock %}